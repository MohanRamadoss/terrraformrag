{"timestamp": "20250128_160036", "query": "Setup Azure PostgreSQL database with high availability", "response": "provider \"azurerm\" {\n  version = \"3.52.0\"\n}\n\n// Resource Group Creation\nresource \"azurerm_resource_group\" \"main\" {\n  name     = \"ha-postgresql-rg\"\n  location = \"eastus\"\n}\n\n// PostgreSQL Server Configuration\nvariable \"admin_password\" {\n  description = \"PostgreSQL admin password\"\n  type       = string\n  sensitive   = true\n}\n\nvariable \"database_name\" {\n  description = \"Name of the database to create\"\n  default     = \"production_db\"\n}\n\nresource \"azurerm_postgresql_server\" \"primary\" {\n  name                = \"postgresql-primary\"\n  location           = \"${azurerm_resource_group.main.location}\"\n  resource_group_name = \"${azurerm_resource_group.main.name}\"\n\n  sku_name            = \"HA-DW1\"\n  storage_mb         = 5120\n  storage_account_type = \"Premium_LRS\"\n\n  zones               = [\"1\", \"2\", \"3\"]\n  replication          = true\n\n  tags                = {\n    Environment = \"Production\"\n    Service     = \"PostgreSQL-HA\"\n  }\n\n  depends_on = [\n    azurerm_resource_group.main\n  ]\n}\n\n// replica instances for HA setup\nresource \"azurerm_postgresql_server\" \"replica1\" {\n  name                = \"postgresql-replica1\"\n  location           = \"${azurerm_resource_group.main.location}\"\n  resource_group_name = \"${azurerm_resource_group.main.name}\"\n\n  sku_name            = \"DW1\"\n  storage_mb         = 5120\n  storage_account_type = \"Premium_LRS\"\n\n  zones               = [\"1\"]\n  replication          = true\n\n  depends_on = [\n    azurerm_postgresql_server.primary\n  ]\n}\n\nresource \"azurerm_postgresql_server\" \"replica2\" {\n  name                = \"postgresql-replica2\"\n  location           = \"${azurerm_resource_group.main.location}\"\n  resource_group_name = \"${azurerm_resource_group.main.name}\"\n\n  sku_name            = \"DW1\"\n  storage_mb         = 5120\n  storage_account_type = \"Premium_LRS\"\n\n  zones               = [\"2\"]\n  replication          = true\n\n  depends_on = [\n    azurerm_postgresql_server.primary\n  ]\n}\n\n// Security Group and Firewall Rules\nresource \"azurerm_network_security_group\" \"db-sg\" {\n  name                = \"db-sg\"\n  location           = \"${azurerm_resource_group.main.location}\"\n  resource_group_name = \"${azurerm_resource_group.main.name}\"\n\n  security_rule {\n    name       = \"allow-postgres\"\n    protocol   = \"TCP\"\n    source_port_range     = \"*\"\n    destination_port_range = \"5432\"\n    source_address_prefixes = [\"10.0.0.0/24\"] // Replace with your application subnet\n    destination_address_prefix = \"*\"\n    access      = \"allow\"\n    priority    = 100\n    direction   = \"inbound\"\n ", "model": "deepseek-r1:14b"}