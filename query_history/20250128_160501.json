{"timestamp": "20250128_160501", "query": "Create a Google Cloud VM instance with debian image", "response": "provider \"google\" {\n  version = \"~>5.7.0\"\n  credentials = file(\"path/to/service-account.json\")\n  project = var.project_id\n  region = var.region\n}\n\nprovider \"randomstring\" {\n  version = \"~>1.4\"\n}\n\nvariable \"project_id\" {\n  description = \"Google Cloud project ID\"\n  type = string\n  default = \"your-project-id\"\n}\n\nvariable \"region\" {\n  description = \"GCP region for VM instance\"\n  type = string\n  default = \"us-central1\"\n}\n\nvariable \"zone\" {\n  description = \"GCP zone for VM instance\"\n  type = string\n  default = \"us-central1-a\"\n}\n\nvariable \"machine_type\" {\n  description = \"GCE machine type (e.g. n1-standard-1)\"\n  type = string\n  default = \"n1-standard-1\"\n}\n\nvariable \"ssh_key\" {\n  description = \"SSH public key for VM access\"\n  type = string\n  default = \"\"\n}\n\n# Generate unique instance ID\nresource \"randomstring\" \"instance_id\" {\n  length = 8\n  special = false\n}\n\n# Get Debian image information\ndata \"google_compute_image\" \"debian_image\" {\n  name   = \"debian-11\"\n  project = \"debian-cloud\"\n}\n\nresource \"google_compute_instance\" \"vm_instance\" {\n  name         = \"gcp-vm-prod-${randomstring.instance_id}\"\n  zone         = var.zone\n  machine_type = var.machine_type\n\n  # Use Debian image\n  disks {\n    initialize_params {\n      disk_size_gb = 10\n      image        = data.google_compute_image.debian_image.self_link\n      type         = \"pd-ssd\"\n    }\n  }\n\n  network_interfaces {\n    subnet = google_compute_subnetwork.main.subnet_id\n\n    access_configs {\n      name     = \"external-nat\"\n      nat_ip   = self.service_account_email\n      type     = \"ONE_TO_ONE_NAT\"\n      metadata = {\n        http_timeout_seconds = 86400\n      }\n    }\n  }\n\n  service_account {\n    email  = var.project_id + \"@compute.iam.gserviceaccount.com\"\n    scopes = [\n      \"https://www.googleapis.com/auth/cloud-platform\",\n      \"https://www.googleapis.com/auth/compute\"\n    ]\n  }\n\n  metadata = {\n    ssh-keys = \"${var.ssh_key}:google-ssh login\"\n  }\n\n  tags = {\n    owner        = var.project_id\n    environment  = \"production\"\n    role         = \"web-server\"\n    created_by   = \"terraform\"\n  }\n}\n\n# Allow SSH access to the VM instance\nresource \"google_compute_firewall\" \"allow_ssh\" {\n  name             = \"allow-ssh-${randomstring.instance_id}\"\n  description      = \"Allow SSH access to VM instance\"\n  source_ranges     = [\"0.0.0.0/0\"]\n  target_tags      = [google_compute_instance.vm_instance.name]\n  allowed            = [\n    {\n      protocol        = \"tcp\"\n      ports           = [\"22\"]\n    }\n  ]\n}\n\n# Outputs\noutput \"vm_external_ip\" {\n  value = google_compute_instance.vm_instance.networkInterfaces[0].accessConfigs[0].natIP\n  description = \"External IP address of the VM instance\"\n}\n\noutput \"vm_hostname\" {\n  value = google_compute_instance.vm_instance.name\n  description = \"Hostname of the VM instance\"\n}", "model": "deepseek-r1:14b"}